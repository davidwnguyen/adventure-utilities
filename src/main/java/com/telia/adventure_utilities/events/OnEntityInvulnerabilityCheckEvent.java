package com.telia.adventure_utilities.events;

import com.telia.adventure_utilities.AdventureUtilities;
import net.minecraft.world.damagesource.DamageSource;
import net.minecraft.world.entity.player.Player;
import net.neoforged.neoforge.event.entity.EntityInvulnerabilityCheckEvent;

public class OnEntityInvulnerabilityCheckEvent {
    public static void onInvulnCheck(EntityInvulnerabilityCheckEvent event) {
        DamageSource source = event.getSource();
        if(!(source.getEntity() instanceof Player player))
            return;

        if(player.level().isClientSide())
            return;

        AdventureUtilities.LOGGER.info("Entity = " + event.getSource().getEntity() + " Strength Scale = " + player.getAttackStrengthScale(0.0f));
        if(player.getAttackStrengthScale(0.0f) > 0.3) {
            event.getEntity().invulnerableTime = 0;
        }
    }
}
